"use strict";angular.module("app",["ngAnimate","appDirectives","appControllers"]),angular.module("appDirectives",[]),angular.module("appControllers",[]),angular.module("appControllers").controller("AppController",["$scope",function(e){e.panes=[{text:"Keep track of your friends and\n                favorite artists' music posts"},{text:"Listen to tracks and watch videos\n                directly in your feed"},{text:"Heart your biggest faves and share\n                your love for the music"},{text:"Remove tracks you dont like so\n                musicfeed can learn your preferences"}]}]),angular.module("appDirectives").directive("carousel",function(){function e(e,n,t){function a(){k=n[0].offsetWidth}function r(e){if(jQuery){var n=jQuery(".view").width(),t=jQuery(".view").height();e.css({width:n,height:t,"margin-left":-n/2,"margin-top":-t/2})}}function l(){var e=angular.element('<div class="carousel-hitarea"></div>').appendTo(n);return angular.element(window).on("load resize orientationchange",function(){r(e)}),r(e),e}function i(){var n=e.currentPane+1>=w?0:e.currentPane+1;c(n,!0,!0)}function o(){h&&clearInterval(h),g&&clearTimeout(g),e.autoplay&&(g=setTimeout(u,2*T))}function u(){h=setInterval(i,T)}function c(n,t,a){e.$apply(function(){e.currentPane=Math.max(0,Math.min(n,w-1))}),s(-100/w*e.currentPane,t,a)}function s(n,t,a){e.$apply(function(){e.animate=t,e.slow=a}),t?setTimeout(function(){f(n)}):f(n),e.$apply(m(n,t,a))}function f(e){y.css("left",e*w+"%")}function m(n){var t=n/C,a=t-e.currentPane;if(!(0>t||t>w-1))if(0==a)e.bullets.map(function(n,t){n.opacity=t==e.currentPane?1:0});else{var r=Math.abs(a),l=1-r;e.bullets[e.currentPane].opacity=l,e.bullets[e.currentPane+(a>0?1:-1)].opacity=r}}function d(){return c(e.currentPane+1,!0)}function p(){return c(e.currentPane-1,!0)}function v(n){switch(o(),n.preventDefault(),n.type){case"panh":var t=C*e.currentPane,a=Math.max(C,Math.min(-C,100/k*n.deltaX/w));(0==e.currentPane&&2==n.offsetDirection||e.currentPane==w-1&&4==n.offsetDirection)&&(a*=.2),s(t+a),n.isFinal&&(Math.abs(n.deltaX)>k/2?4==n.offsetDirection?d():p():c(e.currentPane,!0));break;case"swipeh":if(Math.abs(n.deltaX)>k/2)break;2==n.direction&&d(),4==n.direction&&p()}}var g,h,y=n.find(">ul"),w=e.panes.length||t.numPanes||n.find(">ul >li").length||1,C=-100/w,k=0,P="undefined"!=typeof t.hitarea,b="undefined"!=typeof t.autoplay,D="undefined"!=typeof t.bulletControl,T=t.autoPauseTime||8e3,I=new Hammer.Manager(n[0],{preventDefault:!0,touchAction:"none"}),N=new Hammer.Pan({event:"panh",direction:Hammer.DIRECTION_HORIZONTAL}),$=new Hammer.Swipe({event:"swipeh",direction:Hammer.DIRECTION_HORIZONTAL});I.add(N),I.add($).recognizeWith(N),I.on("swipeh panh",v),e.stripOffset=0,e.currentPane=0,e.animate=!1,e.slow=!1,e.bullets=[],e.bulletControl=D;for(var x=0;w>x;x++)e.bullets.push({opacity:0==x?1:0});e.bulletControlNav=function(n){e.bulletControl&&setTimeout(function(){c(n,!0),o()})},angular.element(document).ready(a),angular.element(window).on("load resize orientationchange",a),P&&l(),e.autoplay=b,e.autoplay&&u()}return Hammer?{restrict:"AEC",templateUrl:"carousel.html",link:e}:console.error("missing Hammer.js")}),angular.module("appDirectives").directive("introAppUi",["$q","$timeout","$animate","$window",function(e,n,t,a){function r(r,l){function i(){setTimeout(function(){r.$apply(function(){var e=M.indexOf(r.tracks[0].colorName),n=0==e?q-1:e-1;r.tracks.unshift({"new":!0,colorName:M[n]}),r.tracks.pop()}),A=Date.now()+500},b())}function o(e){setTimeout(function(){e?u():k().then(u)},b())}function u(){n(function(){1===r.currentPane&&(t.addClass(angular.element("#feed li .play",l).eq(0),"click"),A=Date.now()+600,c())},300)}function c(){n(function(){if(1===r.currentPane){var e=angular.element("#player",l);e.hasClass("visible")?s():(t.addClass(e,"visible",s),A=Date.now()+300)}},300)}function s(){if(1===r.currentPane){var e=angular.element("#play-progress",l);e.hasClass("playing")?t.removeClass(e,"playing",f):f()}}function f(){t.addClass(angular.element("#play-progress",l),"playing"),m()}function m(){n(function(){1===r.currentPane&&(t.addClass(angular.element("#player",l),"full"),A=Date.now()+500,d())},1500)}function d(){n(function(){1===r.currentPane&&t.removeClass(angular.element("#player",l),"full")},3500)}function p(e){setTimeout(function(){e?v():k().then(v)},b())}function v(){n(function(){2===r.currentPane&&(t.addClass(angular.element("#feed li .heart i",l).eq(0),"loved"),t.addClass(angular.element("#feed li .heart b",l).eq(0),"beat"),A=Date.now()+600)},300),A=Date.now()+300}function g(e){setTimeout(function(){e?h():k().then(h)},b())}function h(){n(function(){3===r.currentPane&&(t.addClass(angular.element("#feed li .remove",l).eq(0),"swiped",y),A=Date.now()+200)},300)}function y(){n(function(){3===r.currentPane&&(t.addClass(angular.element("#feed li .remove b",l).eq(0),"click"),A=Date.now()+600,n(w,200))},300)}function w(){3===r.currentPane&&(t.addClass(angular.element("#feed li",l).eq(0),"dispose",C),A=Date.now()+500)}function C(){r.$apply(function(){var e=M.indexOf(r.tracks[r.tracks.length-1].colorName);r.tracks.shift(),r.tracks.push({"new":!1,colorName:M[(e+1)%q]})})}function k(n){var n=n||2,a=e.defer(),i=angular.element("#feed li",l).eq(0);return t.addClass(i,"scrolling"+(1==n?"-one":""),function(){r.tracks.splice(0,n);for(var e=M.indexOf(r.tracks[r.tracks.length-1].colorName),t=e+1;e+1+n>t;t++)r.tracks.push({"new":!1,colorName:M[t%q]});a.resolve()}),A=Date.now()+1500,a.promise}function P(e){if("loved"==e&&(t.removeClass(angular.element("#feed li .heart i",l),"loved"),t.removeClass(angular.element("#feed li .heart b",l),"beat")),"play"==e&&t.removeClass(angular.element("#feed li .play",l),"click"),"new"==e)for(var n=0;n<r.tracks.length;n++)r.tracks[n]["new"]=!1}function b(){return Math.max(0,A-Date.now())}var D,T,I,N,$,x,H,O,M=["red","green","yellow","blue"],q=M.length,A=Date.now();r.tracks=[];for(var E=0;6>E;E++)r.tracks.push({"new":!1,colorName:M[E%q]});r.$watch("currentPane",function(e,n){0==e&&(D=setTimeout(function(){i()},500),T=setInterval(i,2500)),0==n&&0!==e&&(clearTimeout(D),clearInterval(T)),1==e&&(I=setTimeout(function(){o("initial")},500),N=setInterval(o,8e3)),1==n&&(clearTimeout(I),clearInterval(N),setTimeout(function(){t.removeClass(angular.element("#feed li .play",l),"click")},b()),t.removeClass(angular.element("#player",l),"full"),t.removeClass(angular.element("#player",l),"visible",function(){t.removeClass(angular.element("#play-progress",l),"playing")}),P("play")),2==e&&($=setTimeout(function(){p("initial")},500),x=setInterval(p,2500)),2==n&&(clearTimeout($),clearInterval(x),P("loved")),3==e&&(H=setTimeout(function(){g("initial")},500),O=setInterval(g,3500)),3==n&&(clearTimeout(H),clearInterval(O),t.removeClass(angular.element("#feed li .remove",l),"swiped"),t.removeClass(angular.element("#feed li .remove b",l),"click"))}),a.addEventListener("load",function(){angular.element("#track-video video").get(0).play()})}return{restrict:"AEC",templateUrl:"intro-app-ui.html",link:r}}]);